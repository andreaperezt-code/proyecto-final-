{% extends 'base.html' %}

{% block title %}ğŸ¾ Reportar Animal Perdido{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto py-4">
    <div class="glass-card rounded-3xl shadow-2xl overflow-hidden">
        
        <!-- Header -->
        <div class="bg-gradient-to-r from-cyan-500 to-sky-500 px-6 py-5 flex justify-between items-center">
            <h2 class="text-xl font-bold text-white flex items-center gap-2">
                <span class="text-2xl">ğŸ“</span> Reportar Animal Perdido
            </h2>
            <a href="{{ url_for('index') }}" class="text-white/80 hover:text-white text-sm flex items-center gap-1 transition">
                â† Volver
            </a>
        </div>
        
        <!-- Formulario -->
        <form action="{{ url_for('reportar') }}" method="POST" enctype="multipart/form-data" class="p-6 md:p-8 space-y-6">
            
            <!-- Nombre -->
            <div>
                <label class="block text-slate-700 font-semibold mb-2">ğŸ·ï¸ Nombre del Animal</label>
                <input type="text" name="nombre" required
                       class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-cyan-500 focus:ring-4 focus:ring-cyan-100 transition bg-white/50"
                       placeholder="Ej: Max, Luna, Firulais...">
            </div>
            
            <!-- CategorÃ­a -->
            <div>
                <label class="block text-slate-700 font-semibold mb-3">ğŸ¾ Tipo de Animal</label>
                <div class="grid grid-cols-3 sm:grid-cols-6 gap-2">
                    {% for cat, emoji in [('perro', 'ğŸ•'), ('gato', 'ğŸˆ'), ('ave', 'ğŸ¦'), ('conejo', 'ğŸ°'), ('hamster', 'ğŸ¹'), ('otro', 'ğŸ¾')] %}
                    <label class="cursor-pointer">
                        <input type="radio" name="categoria" value="{{ cat }}" {% if cat == 'perro' %}checked{% endif %} class="hidden peer">
                        <div class="peer-checked:border-cyan-500 peer-checked:bg-cyan-50 peer-checked:shadow-lg border-2 border-slate-200 rounded-xl p-3 text-center transition-all duration-200 hover:border-cyan-300 hover:shadow-md bg-white/50">
                            <span class="text-2xl">{{ emoji }}</span>
                            <div class="text-xs text-slate-600 mt-1 capitalize font-medium">{{ cat }}</div>
                        </div>
                    </label>
                    {% endfor %}
                </div>
            </div>
            
            <!-- Foto -->
            <div>
                <label class="block text-slate-700 font-semibold mb-2">ğŸ“· Foto del Animal</label>
                <div class="border-2 border-dashed border-slate-300 rounded-2xl p-6 text-center cursor-pointer hover:border-cyan-400 hover:bg-cyan-50/50 transition-all duration-200" 
                     onclick="document.getElementById('fotoInput').click()">
                    <div id="fotoPlaceholder">
                        <div class="w-16 h-16 bg-gradient-to-br from-cyan-400 to-sky-500 rounded-full flex items-center justify-center mx-auto mb-3 shadow-lg">
                            <span class="text-3xl">ğŸ“·</span>
                        </div>
                        <p class="text-slate-600 font-medium">Haz clic o arrastra una imagen</p>
                        <p class="text-xs text-slate-400 mt-1">JPG, PNG (mÃ¡x. 2MB)</p>
                    </div>
                    <img id="fotoPreview" class="hidden max-h-48 mx-auto rounded-xl shadow-lg">
                </div>
                <input type="file" name="foto" id="fotoInput" accept="image/*" class="hidden" onchange="previewFoto(this)">
            </div>
            
            <!-- DescripciÃ³n -->
            <div>
                <label class="block text-slate-700 font-semibold mb-2">ğŸ“„ DescripciÃ³n</label>
                <textarea name="descripcion" rows="4" required
                          class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-cyan-500 focus:ring-4 focus:ring-cyan-100 transition resize-none bg-white/50"
                          placeholder="Describe a tu mascota: raza, color, tamaÃ±o, caracterÃ­sticas especiales..."></textarea>
            </div>
            
            <!-- Fecha y UbicaciÃ³n -->
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-slate-700 font-semibold mb-2">ğŸ“… Fecha en que se perdiÃ³</label>
                    <input type="date" name="fecha_perdido" required
                           class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-cyan-500 focus:ring-4 focus:ring-cyan-100 transition bg-white/50">
                </div>
                <div>
                    <label class="block text-slate-700 font-semibold mb-2">ğŸ“ Ãšltima ubicaciÃ³n</label>
                    <input type="text" name="ubicacion" required
                           class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-cyan-500 focus:ring-4 focus:ring-cyan-100 transition bg-white/50"
                           placeholder="Ej: Parque Central, Calle 5...">
                </div>
            </div>
            
            <!-- Contacto -->
            <div>
                <label class="block text-slate-700 font-semibold mb-2">ğŸ“ Datos de contacto</label>
                <input type="text" name="contacto" required
                       class="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-cyan-500 focus:ring-4 focus:ring-cyan-100 transition bg-white/50"
                       placeholder="TelÃ©fono, email o red social...">
            </div>
            
            <!-- Botones -->
            <div class="flex flex-col sm:flex-row gap-3 pt-4">
                <button type="submit" class="btn-primary text-white px-6 py-4 rounded-xl font-bold flex-1 flex items-center justify-center gap-2">
                    <span class="text-xl">âœ…</span> Enviar Reporte
                </button>
                <a href="{{ url_for('index') }}" class="btn-secondary px-6 py-4 rounded-xl font-bold flex-1 text-center flex items-center justify-center gap-2">
                    <span>â†</span> Cancelar
                </a>
            </div>
        </form>
    </div>
</div>

{% block scripts %}
<script>
function previewFoto(input) {
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('fotoPreview').src = e.target.result;
            document.getElementById('fotoPreview').classList.remove('hidden');
            document.getElementById('fotoPlaceholder').classList.add('hidden');
        }
        reader.readAsDataURL(input.files[0]);
    }
}
</script>
{% endblock %}
{% endblock %}
